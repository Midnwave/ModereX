#        __  ___          __              _  __
#       /  |/  /___  ____/ /__  ________ | |/ /
#      / /|_/ / __ \/ __  / _ \/ ___/ _ \|   / 
#     / /  / / /_/ / /_/ /  __/ /  /  __/   |  
#    /_/  /_/\____/\__,_/\___/_/   \___/_/|_|  
#                                              
# ModereX Configuration
# Advanced Moderation Plugin for Minecraft 1.21+

# ============================================
# GENERAL SETTINGS
# ============================================
general:
  # Default language (en_US, es_ES, de_DE, fr_FR, pt_BR, zh_CN)
  language: en_US

  # Timezone for date/time display (e.g., America/Chicago, UTC, Europe/London)
  timezone: America/Chicago

  # Enable debug mode for verbose logging
  debug: false

  # Discord webhook URL for debug logs (leave empty to disable)
  # Logs are formatted with diff syntax: - for errors, + for success, plain for debug
  debug-webhook: ''

  # Use 1.21.6+ dialog system instead of chest GUIs when available
  dialogs-enabled: true

# ============================================
# DATABASE SETTINGS
# ============================================
database:
  # Database type: sqlite or mysql
  type: sqlite

  # MySQL settings (only used if type is mysql)
  mysql:
    host: localhost
    port: 3306
    database: moderex
    username: root
    password: ''
    # Connection pool size
    pool-size: 10

# ============================================
# WEB PANEL SETTINGS
# ============================================
webpanel:
  # Enable web panel server (HTTP + WebSocket on same port)
  enabled: false

  # Server port for the web panel (serves both HTTP and WebSocket)
  # Access the panel at: http://localhost:8080/
  port: 8080

  # Public host/IP for clients to connect (leave empty to auto-detect)
  # Set this if your server is behind a proxy or has a custom domain
  host: ''

  # Server name displayed in the web panel
  server-name: 'My Server'

  # Authentication token (auto-generated if empty and enabled)
  auth-token: ''

  # EXPERIMENTAL: Host web panel on same port as Minecraft server
  # Uses Netty injection to detect HTTP traffic on the game port
  # Not recommended for production - use the dedicated port instead
  # When enabled, you can access the panel at: http://your-server:25565/
  same-port: false

  # AI Assistant configuration
  ai:
    # Enable AI assistant in web panel
    enabled: true

    # Ollama endpoint (local or remote)
    # Example for local: http://localhost:11434/api/chat
    # Example for remote: http://192.168.1.100:11434/api/chat
    endpoint: 'http://localhost:11434/api/chat'

    # Model name to use (Ollama model)
    model: 'devstral-2-123b-cloud'

    # API key (leave empty for local Ollama, or set for cloud services)
    api-key: ''

# ============================================
# PROXY SETTINGS
# ============================================
proxy:
  # Enable proxy support for cross-server punishments
  enabled: false

  # Proxy type: bungeecord or velocity
  type: bungeecord

# ============================================
# UPDATE CHECKER
# ============================================
update-checker:
  # Check for updates on Modrinth
  enabled: true

# ============================================
# ANTICHEAT INTEGRATION
# ============================================
anticheat:
  # Auto-detect installed anticheat plugins
  auto-detect: true

  # Manual selection (auto, grim, vulcan, matrix, spartan, ncp, themis, foxaddition, lightac)
  provider: auto

  # Replace anticheat alert messages with ModereX branding
  # When true, ModereX shows its own styled alerts instead of original format
  # NOTE: For full rebranding, also disable alerts in your anticheat's config
  # Example for Grim: set alerts.enabled to false in grim.yml
  rebrand-alerts: true

  # Attempt to block original anticheat messages
  # Works best with anticheats that use events (Vulcan, Matrix)
  # For others, disable their built-in alerts in their config
  block-original-messages: true

  # Alert settings
  alerts:
    # Global toggle
    enabled: true

    # Minimum VL before showing alert (prevents spam)
    min-vl: 5

    # Default alert threshold (X alerts in Y time before showing)
    default-threshold:
      count: 3
      duration: 60s

    # Cooldown between alerts for same player/check (seconds)
    cooldown: 5

  # Per-anticheat settings (override defaults)
  grim:
    enabled: true
    min-vl: 5
  vulcan:
    enabled: true
    min-vl: 10
  matrix:
    enabled: true
    min-vl: 5
  spartan:
    enabled: true
    min-vl: 10
  ncp:
    enabled: true
    min-vl: 10
  themis:
    enabled: true
    min-vl: 5
  foxaddition:
    enabled: true
    min-vl: 5
  lightac:
    enabled: true
    min-vl: 5

# ============================================
# STAFF SETTINGS
# ============================================
staff:
  # Play sound when staff chat message is received
  chat-sound-enabled: true

  # Sound to play (Bukkit Sound enum name)
  chat-sound: ENTITY_ITEM_PICKUP

# ============================================
# CHAT SETTINGS
# ============================================
chat:
  # Default chat slowmode in seconds (0 = disabled)
  default-slowmode: 0

  # Is chat enabled by default
  enabled: true

# ============================================
# MUTE SETTINGS
# ============================================
mute:
  # Allow muted players to use commands (like /msg, /tell, /w)
  allow-commands: false

  # Allow muted players to write on signs
  allow-signs: false

  # Commands blocked while muted (if allow-commands is false)
  blocked-commands:
    - msg
    - tell
    - w
    - whisper
    - reply
    - r
    - me
    - say
    - broadcast

# ============================================
# VANISH SETTINGS
# ============================================
vanish:
  # Hide vanished players from tab list
  hide-from-tablist: true

  # Open containers silently (no animation/sound for others)
  silent-containers: true

  # Disable footstep particles/sounds
  no-footsteps: true

  # Hide real join/leave messages when player joins/leaves while vanished
  # When true, suppresses the vanilla "Player joined/left the game" messages
  hide-real-join-leave: true

  # Persist vanish state across server restarts and logouts
  # When true, players remain vanished when they rejoin the server
  save-vanish-state: true

  # Use packet-level vanishing (NMS) instead of Bukkit hidePlayer()
  # Provides complete invisibility by filtering packets at the Netty pipeline level
  # Fallback to hidePlayer() if packet injection fails
  use-packet-level: true

  # Debug packet filtering (log filtered packets [very verbose])
  debug-packet-filtering: false

  # Plugin API whitelist - plugins that can see vanished players
  # By default, vanished players are hidden from ALL plugins
  # Add plugin names here (case-insensitive) to allow them to detect vanished players
  # Example: ['YourCustomPlugin', 'AdminTools']
  # Note: ModereX itself always has access
  api-whitelist: []

  # ============================================
  # FAKE JOIN/LEAVE MESSAGES
  # ============================================
  fake-messages:
    # Send fake join/leave messages when vanishing/unvanishing
    enabled: false

    # Fake join message (supports placeholders: {player})
    join-message: '&e{player} joined the game'

    # Fake leave message (supports placeholders: {player})
    leave-message: '&e{player} left the game'

  # ============================================
  # PLUGIN HOOKS
  # ============================================
  plugin-hooks:
    # Hook into EssentialsX join/leave messages
    essentialsx:
      enabled: false
      # Hide join/leave messages for vanished players
      hide-messages: true

    # Hook into custom-join-messages plugin
    custom-join-messages:
      enabled: false
      hide-messages: true

    # Hook into AlonsoJoin plugin
    alonsojoin:
      enabled: false
      hide-messages: true

  # ============================================
  # LEVEL-BASED VISIBILITY SYSTEM
  # ============================================
  levels:
    # Enable level-based visibility (staff can see lower-level vanished players)
    enabled: true

    # Default vanish level for players without specific permission
    default-level: 1

    # Vanish level for opped players (highest priority)
    op-level: 100

    # Permission format: moderex.vanish.level.<number>
    # Example: moderex.vanish.level.3 gives vanish level 3
    # A player with level 3 can see vanished players with level 1 and 2
    # A player with level 3 CANNOT see other level 3 players

    # Staff visibility settings
    staff-visibility:
      # Allow staff to see vanished players with lower levels
      can-see-lower-levels: true

      # Permission format for seeing vanished players: moderex.vanish.see.level.<number>
      # Example: moderex.vanish.see.level.2 allows seeing vanished players up to level 2
      # If not set, defaults to their vanish level - 1

  # ============================================
  # LUCKPERMS INTEGRATION
  # ============================================
  luckperms:
    # Modify player prefix/suffix when vanished
    enabled: false

    # Prefix to add when vanished (supports color codes and placeholders)
    vanish-prefix: '&7[V] '

    # Suffix to add when vanished (supports color codes and placeholders)
    vanish-suffix: ''

    # Also modify tab list prefix/suffix
    modify-tab: true

  # ============================================
  # VANISH LIST COMMAND
  # ============================================
  list:
    # Show only vanished players the viewer can see (based on their level)
    # If false, shows all vanished players regardless of level
    respect-visibility: true

    # Show vanish levels in the list
    show-levels: true

    # Format for each player in the list
    # Placeholders: {player}, {level}, {time} (how long they've been vanished)
    format: '&7- &f{player} &8(Level {level})'

# ============================================
# WARNING SETTINGS
# ============================================
warnings:
  # Default warning expiry time (e.g., 30d, 0 = never expire)
  default-expiry: 30d

  # Auto-punishments based on warning count
  # These can also be configured in-game with /mx warningsettings
  auto-punishments:
    # After 3 warnings in 7 days, mute for 1 hour
    3:
      within: 7d
      action: mute
      duration: 1h
    # After 5 warnings in 14 days, mute for 1 day
    5:
      within: 14d
      action: mute
      duration: 1d
    # After 7 warnings in 30 days, temp ban for 7 days
    7:
      within: 30d
      action: ban
      duration: 7d
    # After 10 warnings ever, permanent ban
    10:
      within: 0
      action: ban
      duration: permanent

# ============================================
# REPLAY SETTINGS
# ============================================
replay:
  # Enable replay recording system
  enabled: true

  # Automatically record when anticheat alert is triggered
  record-on-anticheat: true

  # Automatically record watchlisted players
  record-watchlist: true

  # Radius to record nearby players (blocks)
  nearby-radius: 20

  # Maximum recording duration in seconds
  max-duration-seconds: 300

  # Maximum number of stored replays
  max-stored: 1000


# ============================================
# CONFIGURATION VERSION
# ============================================
# DO NOT MODIFY - Used for automatic config migration
config-version: 7





#    ██████╗ ██╗      ██████╗  ██████╗ ██╗  ██╗███████╗ ██████╗ ██████╗   ██████╗ ███████╗
#    ██╔══██╗██║     ██╔═══██╗██╔════╝ ██║ ██╔╝██╔════╝██╔═══██╗██╔══██╗ ██╔════╝ ██╔════╝
#    ██████╔╝██║     ██║   ██║██║      █████╔╝ █████╗  ██║   ██║██████╔╝ ██║  ███╗█████╗
#    ██╔══██╗██║     ██║   ██║██║      ██╔═██╗ ██╔══╝  ██║   ██║██╔══██╗ ██║   ██║██╔══╝
#    ██████╔╝███████╗╚██████╔╝╚██████╗ ██║  ██╗██║     ╚██████╔╝██║  ██║ ╚██████╔╝███████╗
#    ╚═════╝ ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═╝╚═╝      ╚═════╝ ╚═╝  ╚═╝  ╚═════╝ ╚══════╝

#                                              &

#     █████╗ ██████╗ ███████╗    ██╗███╗   ██╗██████╗ ██╗   ██╗███████╗████████╗██████╗ ██╗███████╗███████╗
#    ██╔══██╗██╔══██╗██╔════╝    ██║████╗  ██║██╔══██╗██║   ██║██╔════╝╚══██╔══╝██╔══██╗██║██╔════╝██╔════╝
#    ███████║██║  ██║█████╗      ██║██╔██╗ ██║██║  ██║██║   ██║███████╗   ██║   ██████╔╝██║█████╗  ███████╗
#    ██╔══██║██║  ██║██╔══╝      ██║██║╚██╗██║██║  ██║██║   ██║╚════██║   ██║   ██╔══██╗██║██╔══╝  ╚════██║
#    ██║  ██║██████╔╝██║         ██║██║ ╚████║██████╔╝╚██████╔╝███████║   ██║   ██║  ██║██║███████╗███████║
#    ╚═╝  ╚═╝╚═════╝ ╚═╝         ╚═╝╚═╝  ╚═══╝╚═════╝  ╚═════╝ ╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝╚══════╝╚══════╝
